## The Circular Train

#### Puzzle

You are on a train with some finite but unknown number of identical carriages. Each carriage has a light, which is either on or off, and a switch, which allows you to toggle the state of the lights. At the start, all the lights are in some [random](!This arrangement could be anything, including an adversarial one: your solution shouldn't rely on its behaviour.) configuration.

You may explore the train and use the switches freely, but you cannot make any other marks. How do you determine *with certainty* the total number of carriages in the train?

[&A diagram explaining your situation. The start carriage is highlighted, but in reality it looks no different from any other carriage.](summary.png)

#### Hints

Don't hover over these until you've given the problem a go yourself!

Hint 1: [spoiler]You need to find a way of recognising when you've been in the same carriage twice on different laps of the train.[/spoiler]

Hint 2: [spoiler]You can't know the number for sure unless you go *backwards* as well as forwards around the train.[/spoiler]

Hint 3: [spoiler]How do you know there's more than one carriage? How do you know there are more than two?[/spoiler]

Hint 4: [spoiler]If you change the light in one carriage, and it changes the light in the carriage 5 doors down...[/spoiler]

If you think you have a solution, you can test it out [here](interactive) or read mine [here](solution).